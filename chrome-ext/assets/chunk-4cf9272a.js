console.info("chrome-ext template-vue-ts background script");chrome.runtime.onInstalled.addListener(async()=>{const e={contexts:["all"],id:"copy",title:"\u590D\u5236\u5F53\u524D\u7A97\u53E3"};chrome.contextMenus.create(e)});chrome.contextMenus.onClicked.addListener(e=>{r().then(t=>{t&&t.id&&chrome.windows.create({url:t.url,type:"popup"})})});async function r(){const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}chrome.tabs.onUpdated.addListener(function(e,t,u){t.status&&u.status==="complete"&&console.log("\u5F53\u524Durl",u.url)});chrome.runtime.onMessage.addListener((e,t,u)=>{switch(console.log("\u540E\u53F0\u76D1\u542C\u6D88\u606F: ",e),e.type){case"POPUP_INIT":return r().then(()=>{u({result:"success"})}),!0;case"COPY_WIN":return r().then(n=>{n&&n.id&&(chrome.tabs.duplicate(n.id),u({result:"success"}))}),!0}});
